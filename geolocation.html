
<!DOCTYPE HTML>
<html>
<head>
<meta charset="UTF-8">
<title>Geolocation</title>

<link href='http://fonts.googleapis.com/css?family=Lato:100,300,400,700,900,100italic,300italic,400italic,700italic,900italic' rel="stylesheet"> 
<link rel="stylesheet" href="images/screen.css" media="projection, screen"/> 
</head>
<body>

<header>
    <nav>
        <ul>
            <li class="button cancel" id="back">Back</li>
            <li class="button done" id="next">Next</li>
        </ul>
    </nav>
</header>

<div id="presentation">
<div id="presentation-counter"></div>

<div id="slides">
<!-- PRESENTATION -->

<div class="slide intro">
<header><h1>HTML5 Geolocation</h1></header>
</div>

<div class="slide" id="geolocation">
	<header>
         <h1>Geolocation</h1>
    </header>

      <section>
      <pre contenteditable>function getLocation(){
  if (<b>navigator.geolocation</b>) {
  	  navigator.geolocation.<b>getCurrentPosition</b>(success, error);
	  console.log('got position');
	} else {
	  error('not supported');
	}
}
function error(text){
	text = text || 'failed';
	console.log(text); 
 }
function success(location){
	 var lat = location.<b>coords.latitude</b>;
	 var long = location.<b>coords.longitude</b>;
	 var url = "http://maps.google.com/maps?q="+ lat+","+long; <input type="button" class="button" value="Get Map" onClick="getLocation();"/>
}</pre>
<ul class="icons" style="clear: both;">
     <li class="chrome">Chrome 4</li>
     <li class="safari">Safari 5</li>
     <li class="firefox">Firefox 3.5 </li>
     <li class="opera ">Opera 10.6</li>
     <li class="ie new">IE 9</li>
 </ul>
<script defer>
function getLocation(){
  if (navigator.geolocation) {
  	  navigator.geolocation.getCurrentPosition(success, error);
	} else {
	  error('not supported');
	}
}

 function error(text){
	text = text || 'failed';
	console.log(text); 
 }
 function success(location){
	  console.log(location);
	 var lat = location.coords.latitude;
	 var long = location.coords.longitude;
	 var url = "http://maps.google.com/maps?q="+ lat+","+long;
	// url = "http://maps.google.com/maps?q="+ lat+","+ long + "&amp;ie=UTF8&amp;ll=" + lat + ","+ long +"&amp;spn=0.012738,0.01663&amp;z=14&amp;output=embed"
	 console.log(url);
	 window.open(url, 'map', "width=600,height=600");
 }

</script>
  </section>
</div>

<div class="slide normal">
<header><h1>Two Main Methods</h1></header>
<section class="content">
<dl>
	<dt>getCurrentPosition(successCallback, errorCallback)</dt>
    <dd>gets the user current location once </dd>
    <dt>watchPosition(successCallback, errorCallback)</dt>
    <dd>regularly keeps polling the user location</dd>
</dl>

</section>
</div>

<div class="slide normal">
<header><h1>The Position Object</h1></header>
<section class="content"> 
<ul>
<li>location.coords.latitude</li>
<li>location.coords.longitude</li>
<li>location.coords.altitude</li>
<li>location.coords.accuracy</li>
<li>location.coords.altitude</li>
<li>location.coords.accuracy</li>
<li>location.coords.heading</li>
<li>location.coords.speed</li>
</ul>
</section>
</div>

<div class="slide normal">
<header><h1>Handling Errors</h1></header>
<section class="content"> 
<pre>function error (err) {
  switch(err.code) {
  case 1:
	alert("No permission to use geolocation");
    break;

  case 2:
	alert("Sorry, but a problem happened while getting your location");
	break;

  case 3:
	alert("Sorry, this is taking too long...");
	break;
  }
}</pre>
<pre>PERMISSION_DENIED = 1 
POSITION_UNAVAILABLE = 2
TIMEOUT = 3
code 
message</pre>
</section>
</div>

<div class="slide normal"> 
     <header><h1>Code Lab</h1></header> 
     <section class="content">
     <div style="height:550px; overflow:scroll">
     <p> Browse into your labs folder in the <a href="https://github.com/estelle/html5training/tree/master/html5_labs/geolocation" target="play">geolocation folder</a> and edit index.html. This page contains a &lt;div

id="map_canvas"> (even though it is not a canvas) that will contain our google map and it also contains three empty

JavaScript functions: The ﬁrst one we call when the page has ﬁnished to load is getLocation(). Then the two other

functions will be callback function when getting user location: successCallback(pos) and errorCallback(err)</p>

<ol>
<li>In the code, look for a // TODO 1. Here we want to get the user location in one line using the "one-time location"

function<br>

• Pass the success and error callback to the function you are going to use</li>

<li>Look for a // TODO 2. Here we are using the Google Map API to create a coordinate (using the google.maps.LatLng

function)<br>

• This google.maps.LatLng function expects a latitude and a longitude as parameters. Use the Position object,

pos, provided by the success callback to get those informations</li>

<li> Look for a // TODO 3. Here we need to get the accuracy of the obtained position so we are going to be able to

display that in the map
<br>
• Replace xxxxxx by the accuracy you can get from the Position object, pos</li>

<li>Finally, open the ﬁnal index.html in Firefox 3.5+, Safari 5.0+, Chrome 5.0+ or Opera 10.6+</li>

<li> Allow the page to get user location and you should get a marker on a map representing your user location</li></ol>
     </div> 
     <a href="html5_labs/geolocation/index.html" target="play">Try it out</a>
     </section>
 </div>


<div class="slide intro">
<header><h1>HTML5 Web Workers</h1></header>

    <h1><a href="workers.html">Next ➹</a></h1>
</div>


<!-- END of PRESENTATION -->
</div><!-- slides -->
</div><!-- presentation -->
<script src="images/slide.js"></script>
</body>
</html>
